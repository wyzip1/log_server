import{d as h,x as p,r as l,o as I,g as k,h as o,w as t,p as y,n as S,m as j,i as m,j as L,q as v}from"./vendor.604b4b01.js";import{d as U}from"./user.93d7ef41.js";import{_ as q,g as B,a as C}from"./index.ab2eedc5.js";const N=r=>(y("data-v-2f2f1a34"),r=r(),S(),r),V={class:"login"},F=N(()=>m("div",{class:"title"},[m("span",null,"Login Learn-Log")],-1)),R={class:"footer"},E=v(" \u767B\u5F55 "),T=v(" \u53BB\u6CE8\u518C "),$={setup(r){const d=h(),i=B();i.login&&d.replace("/");const c=p(!1),s=p({account:i.account||"",password:i.password||""}),g=p({account:[{required:!0,message:"\u8D26\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],password:[{required:!0,message:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]});function b({account:_,password:e}){c.value=!0,U({account:_,password:e}).then(a=>{j.success(a.msg),C({id:a.data._id,account:_,password:e,username:a.data.username,login:!0},!1);const n=a.data.token;localStorage.setItem("token",n),d.replace("/")}).finally(()=>c.value=!1)}return(_,e)=>{const a=l("a-input"),n=l("a-form-item"),w=l("a-input-password"),f=l("a-button"),x=l("a-form");return I(),k("div",V,[F,o(x,{class:"form",model:s.value,rules:g.value,onFinish:b},{default:t(()=>[o(n,{label:"\u8D26\u53F7\uFF1A",name:"account"},{default:t(()=>[o(a,{value:s.value.account,"onUpdate:value":e[0]||(e[0]=u=>s.value.account=u)},null,8,["value"])]),_:1}),o(n,{label:"\u5BC6\u7801\uFF1A",name:"password"},{default:t(()=>[o(w,{value:s.value.password,"onUpdate:value":e[1]||(e[1]=u=>s.value.password=u)},null,8,["value"])]),_:1}),o(n,null,{default:t(()=>[m("div",R,[o(f,{loading:c.value,type:"primary","html-type":"submit"},{default:t(()=>[E]),_:1},8,["loading"]),o(f,{onClick:e[2]||(e[2]=u=>L(d).push("/login/register"))},{default:t(()=>[T]),_:1})])]),_:1})]),_:1},8,["model","rules"])])}}};var G=q($,[["__scopeId","data-v-2f2f1a34"]]);export{G as default};
