import{r as a,k as t,f as s,g as l,F as e,m as i,w as n,p as o,i as c,b as u,d,e as v,o as p,t as m}from"./vendor.da39e7fd.js";import{g as r,c as f,d as g}from"./chapter.13c42637.js";import{g as k,a as y,d as _}from"./type.90d2ee65.js";import{_ as C,a as b}from"./Button.5ceeb0fb.js";import{_ as w}from"./Pagination.f32cf4df.js";import"./util.cdae3ab6.js";const h=n();o("data-v-f397233c");const j={class:"container"},I={class:"block-link"},V=c("写文章/日志"),x={class:"item"},z=l("div",{class:"title"},"我的文章",-1),O={class:"info"},q={class:"tag"},B={class:"control"},F={class:"pagination-group"},P={class:"item"},T=l("div",{class:"title"},"我的日志",-1),U={class:"info"},$={class:"tag"},A={class:"control"},D={class:"pagination-group"},E={class:"item"},G=l("div",{class:"title"},"类型管理",-1),H={class:"addType"};u();const J={expose:[],setup(n){const o=a({list:[],pages:1}),u=a({list:[],pages:1}),J=a([]),K=a(""),L=a(1),M=a(1),N=d();async function Q(a,t,s=!1){if(confirm("确认删除")){let t=await g({chapterId:a});console.log(t),t.status?alert(t.meta.msg):s?X(M.value):W(L.value)}}function R(a){N.push({path:"/center/edit",query:{mode:"edit",chapterId:a}})}async function S(){let a=await y({name:K.value});a.status?alert(a.meta.msg):J.value.push(a.meta.data)}async function W(a=1){L.value=a;let t=await r({page:a,size:10});o.value.list=t.meta.data.docs,o.value.pages=t.meta.data.total_page,console.log(o.value)}async function X(a=1){M.value=a;let t=await f({page:a,size:10});u.value.list=t.meta.data.docs,u.value.pages=t.meta.data.total_page}return t((async()=>{await W(),await X();let a=await k(!1);J.value=a.meta.data})),(a,t)=>{const n=v("router-link");return p(),s("div",j,[l("div",I,[l(n,{to:"/center/edit"},{default:h((()=>[V])),_:1})]),l("div",x,[z,(p(!0),s(e,null,i(o.value.list,((a,t)=>(p(),s("div",{class:"list",key:a._id},[l("div",O,[c(m(a.title)+" - ",1),l("span",q,m(a.type.name),1)]),l("div",B,[l("button",{onClick:t=>R(a._id)},"编辑",8,["onClick"]),l("button",{onClick:t=>Q(a._id)},"删除",8,["onClick"])])])))),128)),l("div",F,[l(w,{total:o.value.pages,onOnChange:W},null,8,["total"])])]),l("div",P,[T,(p(!0),s(e,null,i(u.value.list,((a,t)=>(p(),s("div",{class:"list",key:a._id},[l("div",U,[c(m(a.title)+" - ",1),l("span",$,m(a.type.name),1)]),l("div",A,[l("button",{onClick:t=>R(a._id)},"编辑",8,["onClick"]),l("button",{onClick:t=>Q(a._id,0,!0)},"删除",8,["onClick"])])])))),128)),l("div",D,[l(w,{total:u.value.pages,onOnChange:X},null,8,["total"])])]),l("div",E,[G,(p(!0),s(e,null,i(J.value,((a,t)=>(p(),s("div",{class:"list type",key:a._id},[l("button",null,m(a.name),1),l(b,{value:"删除",onClick:s=>async function(a,t,s){if(confirm(`确认删除【${t}类型么】`)){let t=await _({id:a});t.status?alert(t.meta.msg):J.value.splice(s,1)}}(a._id,a.name,t)},null,8,["onClick"])])))),128)),l("div",H,[l(C,{class:"input",modelValue:K.value,"onUpdate:modelValue":t[1]||(t[1]=a=>K.value=a)},null,8,["modelValue"]),l(b,{value:"添加",onClick:S,class:"button"})])])])}},__scopeId:"data-v-f397233c"};export default J;
